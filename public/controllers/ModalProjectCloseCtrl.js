(function(){  var app = angular.module('crewjob');    var ModalProjectCloseCtrl = function($scope, $uibModalInstance, item, projectServices, toastinoService, userServices){        $('.loading').hide();        $scope.getRating = function(uid, pid, rating){            //toastinoService.makeDangerToast(rating + ' ' + uid + ' ' + pid , 'short');            userServices.rate(uid, pid, rating)                .success(function(response){                    if(response.status){                        toastinoService.makeSuccessToast('Успешно оценихте потребителя!', 'long');                    }else{                        toastinoService.makeWarningToast("Този потребител е оценен!", 'long');                    }                }).error(function(){                toastinoService.makeDangerToast('Нещо се обърка, моля опитайте отново!', 'long');            });        };        $scope.rating = [];        projectServices.getProjectApply(item)            .success(function(response){                $('.loading').hide();                if(response.status){                    $scope.projectApply = response.apply;                    angular.forEach(response.apply, function(v, i){                        $scope.rating[i] = {                            rating : response.apply[i].rating,                            basedOn : 10,                            starsCount : 10,                            iconClass : 'fa fa-star',                            editableRating : true,                            showGrade : true                        };                    });                }else{                    toastinoService.makeWarningToast("Нещо се обърка, моля опитайте отново!", 'long');                }            }).error(function(){            $('.loading').hide();            toastinoService.makeDangerToast("Нещо се обърка, моля опитайте отново!", 'long');        });        $scope.cancel = function () {            $uibModalInstance.dismiss('cancel');        };    };    app.controller('ModalProjectCloseCtrl', ModalProjectCloseCtrl);}());