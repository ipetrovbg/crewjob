(function () {    var app = angular.module('crewjob');    var ModalViewMessageCtrl = function ($scope, $uibModalInstance, item, toastinoService, userServices) {        console.log(item.author);        $scope.status = false;        userServices.getMessage(item.id).success(function (response) {            if (response.status) {                $scope.status = true;                $('.loading').hide();                $scope.message = response.message;                userServices.updateMsgStatus(item.id, item.author).success(function (response) {                    if (response.status == false) {                        toastinoService.makeWarningToast('Нещо се обърка!', 'long');                        $uibModalInstance.close($scope.status);                    }                }).error(function () {                    toastinoService.makeDangerToast('Нещо се обърка!', 'long');                    $uibModalInstance.close($scope.status);                });            } else {                $('.loading').hide();                toastinoService.makeDangerToast('Не успяхме да заредим съобщението!', 'long');                $uibModalInstance.close($scope.status);            }        }).error(function () {            $('.loading').hide();            toastinoService.makeDangerToast('Нещо се обърка. Моля опитайте отново!', 'long');            $uibModalInstance.close($scope.status);        });        $scope.cancel = function () {            $uibModalInstance.close($scope.status);        };    };    app.controller('ModalViewMessageCtrl', ModalViewMessageCtrl);}());