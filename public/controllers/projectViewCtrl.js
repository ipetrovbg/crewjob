(function(){    var app = angular.module('crewjob');    var projectViewCtrl = function($scope, $routeParams, $timeout, $cookies, toastinoService, projectServices, $location, userServices, auth){        projectServices.getProject($routeParams.project_id)            .success(function(response){                if(response.status){                    $scope.projectTitle = response.project.name;                    $scope.projectId = response.project.id;                    $scope.projectDescription = response.project.description;                    $scope.projectImages = response.project.images;                    $scope.projectFiles = response.project.files;                    $scope.location = response.project.location;                    $scope.projectCoords = {                        latitude: response.project.latitude,                        longitude: response.project.longitude                    };                    $scope.map = { center: { latitude:  response.project.latitude,  longitude: response.project.longitude }, zoom: 8 };                    userServices.getUser(response.project.user_id)                        .success(function(response){                            $scope.projectUserAvatar = response.user.avatar;                            $scope.projectUserName = response.user.name;                            $scope.projectUserEmail = response.user.email;                            $scope.projectUserId = response.user.id;                        }).error(function(promise){                        console.log(promise);                    });                    projectServices.getProjectCategories($routeParams.project_id)                        .success(function(response){                            console.log(response);                            $scope.projectCategories = response.categories;                        }).error(function(promise){                       console.log(promise);                    });                    auth.isAuth().then(function(response){                        if(response.auth){                            if($scope.projectUserId == $cookies.get('ID')){                                $scope.isAuthor = true;                            }else{                                $scope.isAuthor = false;                            }                        }                        $scope.auth = response.auth;                    });                }else{                    toastinoService.makeDangerToast('Няма такъв проект!', 'long');                    $location.path('/projects');                }            }).error(function(reason){            console.log(reason);        });    };    app.controller('projectViewCtrl', projectViewCtrl);}());