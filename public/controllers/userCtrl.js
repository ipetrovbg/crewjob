(function () {    var app = angular.module('crewjob');    var userCtrl = function ($scope, $route, $routeParams, userServices, toastinoService, $location, $uibModal, auth, $cookies) {        var userId = $routeParams.user_id;        $("html, body").animate({scrollTop: 0}, "fast");        userServices.getUser(userId)            .success(function (response) {                if(response.status === false){                    toastinoService.makeDangerToast('Няма такъв потребител!', 'long');                    $location.path('/');                }else{                    if(response.user != 'undefined'){                        $scope.userId = response.user.id;                        $scope.userName = response.user.name;                        $scope.userEmail = response.user.email;                        $scope.userCreated_at = response.user.created_at;                        $scope.userGender = response.user.gender;                        $scope.userDate_of_birth = response.user.date_of_birth;                        $scope.userAvatar = response.user.avatar;                        $scope.userDescription = response.user.description;                        $scope.cat = response.cat;                        $scope.links = response.links;                        if(response.finishedP){                            $scope.finishedP = response.finishedP;                        }else{                            $scope.finishedP = 0;                        }                        if(response.notFinishedP){                            $scope.notFinishedP = response.notFinishedP;                        }else{                            $scope.notFinishedP = 0;                        }                        if(response.rating){                            $scope.rating = response.rating[0];                        }else{                            $scope.rating = null;                        }                        $scope.auth = false;                        auth.isAuth().then(function(response){                            if(response.auth){                                if($scope.userId != $cookies.get('ID')){                                    $scope.auth = response.auth;                                }                                $scope.open = function (id) {                                    var modalInstance = $uibModal.open({                                        animation: true,                                        templateUrl: 'public/templates/modal-message.html',                                        controller: 'ModalMessageCtrl',                                        size: 'lg',                                        resolve: {                                            item: function () {                                                return id;                                            }                                        }                                    });                                    modalInstance.result.then(function (selectedItem) {                                        $scope.selected = selectedItem;                                    }, function () {                                        //$log.info('Modal dismissed at: ' + new Date());                                    });                                };                            }                        });                    }                }            }).error(function () {            toastinoService.makeDangerToast('Нещо се обърка, моля опитайте отново!', 'long');        });    };    app.controller('userCtrl', userCtrl);}());